<md-sidenav-container>

	<md-card>
		<md-card-title>Registro</md-card-title>
    <form name="form" (ngSubmit)="f.form.valid && register()" #f="ngForm" novalidate>
    <table class="table"><tr>
    <td><md-card>
    <md-card-title>Datos personales</md-card-title>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !nombre.valid }">
            <label for="nombre">Nombre</label>
            <input type="text" class="form-control" name="nombre" [(ngModel)]="model.nombre" #nombre="ngModel" required />
            <div *ngIf="f.submitted && !nombre.valid" class="help-block">Es necesario introducir el nombre</div>
        </div>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !apellidos.valid }">
            <label for="apellidos">Apellidos</label>
            <input type="text" class="form-control" name="apellidos" [(ngModel)]="model.apellidos" #apellidos="ngModel" required />
            <div *ngIf="f.submitted && !apellidos.valid" class="help-block">Es necesario introducir los apellidos</div>
        </div>
        
		<div class="form-group" [ngClass]="{ 'has-error': f.submitted && !email.valid }">
            <label for="email">Email</label>
            <input type="text" class="form-control" name="email" [(ngModel)]="model.email" 
            required pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$" #email="ngModel" required />
            <div *ngIf="email.errors && (f.submitted || email.dirty || email.touched)"
            	class="alert alert-danger">
            	<div [hidden]="!email.errors.required">
              		Es necesario introducir el email
            	</div>
            	<div [hidden]="!email.errors.pattern">
              		Email incorrecto
            	</div>
        	</div>
        </div>    
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !telefono.valid }">
            <label for="telefono">Telefono</label>
            <input type="text" class="form-control" name="telefono" [(ngModel)]="model.telefono" #telefono="ngModel" required />
            <div *ngIf="f.submitted && !telefono.valid" class="help-block">Debe introducir un telefono</div>
        </div>
        </md-card></td>
             
        <td><md-card>
        <md-card-title>Datos de la plaza</md-card-title>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !titulo.valid }">
            <label for="titulo">Titulo</label>
            <input type="text" class="form-control" name="titulo" [(ngModel)]="model.titulo" #titulo="ngModel" required />
            <div *ngIf="f.submitted && !titulo.valid" class="help-block">Es necesario introducir un titulo</div>
        </div>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !ciudad.valid }">
            <label for="ciudad">Ciudad</label>
            <input type="text" class="form-control" name="ciudad" [(ngModel)]="model.ciudad" #ciudad="ngModel" required />
            <div *ngIf="f.submitted && !ciudad.valid" class="help-block">Es necesario introducir la ciudad</div>
        </div>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !centro.valid }">
            <label for="centro">Centro</label>
            <input type="text" class="form-control" name="centro" [(ngModel)]="model.centro" #centro="ngModel" required />
            <div *ngIf="f.submitted && !centro.valid" class="help-block">Es necesario introducir el centro</div>
        </div>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !direccion.valid }">
            <label for="direccion">Direccion</label>
            <input type="text" class="form-control" name="direccion" [(ngModel)]="model.direccion" #direccion="ngModel" required />
            <div *ngIf="f.submitted && !direccion.valid" class="help-block">Es necesario introducir una direccion</div>
        </div>
		</md-card></td>
		
		<td><md-card>
        <md-card-title>Cuenta</md-card-title>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !username.valid }">
            <label for="username">Username</label>
            <input type="text" class="form-control" required minlength="4" maxlength="24" 
            name="username" [(ngModel)]="model.username" #username="ngModel" required />
            <div *ngIf="username.errors && (f.submitted || username.dirty || username.touched)"
            	class="alert alert-danger">
            	<div [hidden]="!username.errors.required">
              		Debe introducir un nombre de usuario
            	</div>
            	<div [hidden]="!username.errors.minlength">
              		El nombre de usuario debe contener al menos 4 caracteres
            	</div>
            	<div [hidden]="!username.errors.maxlength">
              		El nombre de usuario no puede contener mas de 24 caracteres
            	</div>
        	</div>
        </div>
        
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
            <label for="password">Password</label>
            <input type="password" class="form-control" name="password" [(ngModel)]="model.password"
            required validateEqual="confirm" reverse="true" #password="ngModel" required />
            <div *ngIf="f.submitted && !password.valid" class="help-block">Debe introducir la password</div>
        </div>
        <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !confirm.valid }">
            <label for="confirm">Confirmar password</label>
            <input type="password" class="form-control" name="confirm" [(ngModel)]="model.confirm"
            required validateEqual="password" reverse="false" #confirm="ngModel" required />
            <div *ngIf="confirm.errors && (f.submitted || confirm.dirty || confirm.touched)"
            	class="alert alert-danger">
            	<div [hidden]="!confirm.errors.required">
              		Este campo es obligatorio
            	</div>
            	<div [hidden]="confirm.valid">
              		La password no coincide
            	</div>
        	</div>
        </div>
        <br>
        <div class="form-group">
        	<button md-raised-button [disabled]="loading || !f.form.valid" color="primary">Registrarse</button>
            <ng-container *ngIf="loading">
            <md-progress-circle
        		class="example-margin"
        		[color]="color"
        		[mode]="mode"
        		[value]="value">
    		</md-progress-circle>
    		</ng-container>
    		<a md-button routerLink="/login">Cancelar</a>
        </div>
        </md-card></td>
		</tr></table>
    </form>
    </md-card>

</md-sidenav-container>